{"ast":null,"code":"import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\nexport const fetchProductBasket = createAsyncThunk('basketSlice/fetchProductBasket', async () => {\n  const {\n    data\n  } = await axios.get('https://62b1bba0196a9e98703c1172.mockapi.io/card');\n  return data;\n});\nexport const addProductBasket = createAsyncThunk('basketSlice/fetchProductBasket', async params => {\n  const obj = params;\n  await axios.post('https://62b1bba0196a9e98703c1172.mockapi.io/card', obj);\n  return obj;\n});\nexport const delProductBasket = createAsyncThunk('basketSlice/delProductBasket', async params => {\n  const id = params; // const { data } = await axios.get('https://62b1bba0196a9e98703c1172.mockapi.io/card');\n\n  await axios.delete(`https://62b1bba0196a9e98703c1172.mockapi.io/card/${id}`);\n  return id;\n});\nconst initialState = {\n  basketItems: [],\n  basketStatus: 'loading'\n};\nexport const ProductSlice = createSlice({\n  name: 'product',\n  initialState: initialState,\n  reducers: {\n    setItems: (state, action) => {\n      state.items = action.payload;\n    } // addItems: (state, action) => {\n    //   const obj = action.payload;\n    //   axios.post('https://62b1bba0196a9e98703c1172.mockapi.io/card', obj);\n    //   fetchProductBasket();\n    // },\n    // delItems: (state, action) => {\n    //   const id = action.payload;\n    //   axios.delete(`https://62b1bba0196a9e98703c1172.mockapi.io/card/${id}`);\n    //   state.basketItems = state.basketItems.filter((item) => item.id !== id);\n    //   fetchProductBasket();\n    // },\n\n  },\n  extraReducers: builder => {\n    builder.addCase(fetchProductBasket.fulfilled, (state, action) => {\n      state.basketItems = action.payload;\n      state.basketStatus = 'success';\n    });\n    builder.addCase(fetchProductBasket.pending, (state, action) => {\n      state.basketItems = [];\n      state.basketStatus = 'loading';\n    });\n    builder.addCase(fetchProductBasket.rejected, (state, action) => {\n      state.basketItems = [];\n      state.basketStatus = 'error';\n    });\n    builder.addCase(addProductBasket.pending, (state, action) => {\n      state.basketItems = state.basketItems.filter(item => item.id !== action);\n    });\n  }\n});\nexport const {\n  setItems,\n  addItems,\n  delItems\n} = ProductSlice.actions;\nexport default ProductSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","axios","fetchProductBasket","data","get","addProductBasket","params","obj","post","delProductBasket","id","delete","initialState","basketItems","basketStatus","ProductSlice","name","reducers","setItems","state","action","items","payload","extraReducers","builder","addCase","fulfilled","pending","rejected","filter","item","addItems","delItems","actions","reducer"],"sources":["/Users/temirlan.kanafin/Desktop/git projects/reactt-sneakers/src/components/redux/slices/basketSlice.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nexport const fetchProductBasket = createAsyncThunk('basketSlice/fetchProductBasket', async () => {\n  const { data } = await axios.get('https://62b1bba0196a9e98703c1172.mockapi.io/card');\n  return data;\n});\n\nexport const addProductBasket = createAsyncThunk(\n  'basketSlice/fetchProductBasket',\n  async (params) => {\n    const obj = params;\n    await axios.post('https://62b1bba0196a9e98703c1172.mockapi.io/card', obj);\n    return obj;\n  },\n);\n\nexport const delProductBasket = createAsyncThunk('basketSlice/delProductBasket', async (params) => {\n  const id = params;\n  // const { data } = await axios.get('https://62b1bba0196a9e98703c1172.mockapi.io/card');\n  await axios.delete(`https://62b1bba0196a9e98703c1172.mockapi.io/card/${id}`);\n  return id;\n});\n\nconst initialState = {\n  basketItems: [],\n  basketStatus: 'loading',\n};\n\nexport const ProductSlice = createSlice({\n  name: 'product',\n  initialState: initialState,\n  reducers: {\n    setItems: (state, action) => {\n      state.items = action.payload;\n    },\n    // addItems: (state, action) => {\n    //   const obj = action.payload;\n    //   axios.post('https://62b1bba0196a9e98703c1172.mockapi.io/card', obj);\n    //   fetchProductBasket();\n    // },\n    // delItems: (state, action) => {\n    //   const id = action.payload;\n    //   axios.delete(`https://62b1bba0196a9e98703c1172.mockapi.io/card/${id}`);\n    //   state.basketItems = state.basketItems.filter((item) => item.id !== id);\n    //   fetchProductBasket();\n    // },\n  },\n  extraReducers: (builder) => {\n    builder.addCase(fetchProductBasket.fulfilled, (state, action) => {\n      state.basketItems = action.payload;\n      state.basketStatus = 'success';\n    });\n    builder.addCase(fetchProductBasket.pending, (state, action) => {\n      state.basketItems = [];\n      state.basketStatus = 'loading';\n    });\n    builder.addCase(fetchProductBasket.rejected, (state, action) => {\n      state.basketItems = [];\n      state.basketStatus = 'error';\n    });\n    builder.addCase(addProductBasket.pending, (state, action) => {\n      state.basketItems = state.basketItems.filter((item) => item.id !== action);\n    });\n  },\n});\n\nexport const { setItems, addItems, delItems } = ProductSlice.actions;\nexport default ProductSlice.reducer;\n"],"mappings":"AAAA,SAASA,gBAAT,EAA2BC,WAA3B,QAA8C,kBAA9C;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,OAAO,MAAMC,kBAAkB,GAAGH,gBAAgB,CAAC,gCAAD,EAAmC,YAAY;EAC/F,MAAM;IAAEI;EAAF,IAAW,MAAMF,KAAK,CAACG,GAAN,CAAU,kDAAV,CAAvB;EACA,OAAOD,IAAP;AACD,CAHiD,CAA3C;AAKP,OAAO,MAAME,gBAAgB,GAAGN,gBAAgB,CAC9C,gCAD8C,EAE9C,MAAOO,MAAP,IAAkB;EAChB,MAAMC,GAAG,GAAGD,MAAZ;EACA,MAAML,KAAK,CAACO,IAAN,CAAW,kDAAX,EAA+DD,GAA/D,CAAN;EACA,OAAOA,GAAP;AACD,CAN6C,CAAzC;AASP,OAAO,MAAME,gBAAgB,GAAGV,gBAAgB,CAAC,8BAAD,EAAiC,MAAOO,MAAP,IAAkB;EACjG,MAAMI,EAAE,GAAGJ,MAAX,CADiG,CAEjG;;EACA,MAAML,KAAK,CAACU,MAAN,CAAc,oDAAmDD,EAAG,EAApE,CAAN;EACA,OAAOA,EAAP;AACD,CAL+C,CAAzC;AAOP,MAAME,YAAY,GAAG;EACnBC,WAAW,EAAE,EADM;EAEnBC,YAAY,EAAE;AAFK,CAArB;AAKA,OAAO,MAAMC,YAAY,GAAGf,WAAW,CAAC;EACtCgB,IAAI,EAAE,SADgC;EAEtCJ,YAAY,EAAEA,YAFwB;EAGtCK,QAAQ,EAAE;IACRC,QAAQ,EAAE,CAACC,KAAD,EAAQC,MAAR,KAAmB;MAC3BD,KAAK,CAACE,KAAN,GAAcD,MAAM,CAACE,OAArB;IACD,CAHO,CAIR;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;;EAdQ,CAH4B;EAmBtCC,aAAa,EAAGC,OAAD,IAAa;IAC1BA,OAAO,CAACC,OAAR,CAAgBvB,kBAAkB,CAACwB,SAAnC,EAA8C,CAACP,KAAD,EAAQC,MAAR,KAAmB;MAC/DD,KAAK,CAACN,WAAN,GAAoBO,MAAM,CAACE,OAA3B;MACAH,KAAK,CAACL,YAAN,GAAqB,SAArB;IACD,CAHD;IAIAU,OAAO,CAACC,OAAR,CAAgBvB,kBAAkB,CAACyB,OAAnC,EAA4C,CAACR,KAAD,EAAQC,MAAR,KAAmB;MAC7DD,KAAK,CAACN,WAAN,GAAoB,EAApB;MACAM,KAAK,CAACL,YAAN,GAAqB,SAArB;IACD,CAHD;IAIAU,OAAO,CAACC,OAAR,CAAgBvB,kBAAkB,CAAC0B,QAAnC,EAA6C,CAACT,KAAD,EAAQC,MAAR,KAAmB;MAC9DD,KAAK,CAACN,WAAN,GAAoB,EAApB;MACAM,KAAK,CAACL,YAAN,GAAqB,OAArB;IACD,CAHD;IAIAU,OAAO,CAACC,OAAR,CAAgBpB,gBAAgB,CAACsB,OAAjC,EAA0C,CAACR,KAAD,EAAQC,MAAR,KAAmB;MAC3DD,KAAK,CAACN,WAAN,GAAoBM,KAAK,CAACN,WAAN,CAAkBgB,MAAlB,CAA0BC,IAAD,IAAUA,IAAI,CAACpB,EAAL,KAAYU,MAA/C,CAApB;IACD,CAFD;EAGD;AAnCqC,CAAD,CAAhC;AAsCP,OAAO,MAAM;EAAEF,QAAF;EAAYa,QAAZ;EAAsBC;AAAtB,IAAmCjB,YAAY,CAACkB,OAAtD;AACP,eAAelB,YAAY,CAACmB,OAA5B"},"metadata":{},"sourceType":"module"}